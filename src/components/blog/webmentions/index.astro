---
/** Editorial Minimalism Webmentions **/
import { getWebmentionsForUrl } from "@/utils/webmentions";
import Comments from "./Comments.astro";
import Likes from "./Likes.astro";

const url = new URL(Astro.url.pathname, Astro.site);

const webMentions = await getWebmentionsForUrl(`${url}`);

// Return if no webmentions
if (!webMentions.length) return;
---

<section class="mt-12">
  <p class="section-label mb-6">Webmentions</p>
  <div class="space-y-10">
    <Likes mentions={webMentions} />
    <Comments mentions={webMentions} />
  </div>
  <p class="mt-8 text-text-secondary" style="font-size: var(--text-micro);">
    Powered by{" "}
    <a
      class="link-muted"
      href="https://webmention.io"
      rel="noreferrer"
      target="_blank">Webmention.io</a
    >
  </p>
</section>

---
/** Editorial Minimalism Likes - clean avatar stack **/
import { Image } from "astro:assets";
import type { WebmentionsChildren } from "@/types";

interface Props {
	mentions: WebmentionsChildren[];
}

const { mentions } = Astro.props;
const MAX_LIKES = 10;

const likes = mentions.filter((mention) => mention["wm-property"] === "like-of");
const likesToShow = likes
	.filter((like) => like.author?.photo && like.author.photo !== "")
	.slice(0, MAX_LIKES);
---

{
  !!likes.length && (
    <div>
      <p class="mb-4 text-sm text-text-secondary">
        {likes.length} {likes.length > 1 ? "people" : "person"} liked this
      </p>
      {!!likesToShow.length && (
        <ul class="flex list-none flex-wrap overflow-hidden ps-2" role="list">
          {likesToShow.map((like) => (
            <li class="p-like h-cite -ms-2">
              <a
                class="u-url not-prose relative inline-block overflow-hidden rounded-full border border-border hover:z-10"
                href={like.author?.url}
                rel="noreferrer"
                target="_blank"
                title={like.author?.name}
              >
                <span class="p-author h-card">
                  <Image
                    alt={like.author!.name}
                    class="u-photo my-0 inline-block h-10 w-10"
                    height={40}
                    src={like.author!.photo}
                    width={40}
                  />
                </span>
              </a>
            </li>
          ))}
        </ul>
      )}
    </div>
  )
}

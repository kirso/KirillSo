/**
 * ============================================================================
 * KIRILLSO.COM DESIGN SYSTEM
 * ============================================================================
 *
 * DESIGN PHILOSOPHY
 * -----------------
 * Editorial Minimalism — Typography-first design where content breathes.
 * Every element earns its place. Nothing decorative, everything purposeful.
 *
 * AESTHETIC PRINCIPLES
 * --------------------
 * 1. Paper-like warmth     — Warm stone palette, not sterile white
 * 2. Typography hierarchy  — Weight and size create structure, not color
 * 3. Generous whitespace   — Content breathes, reading feels effortless
 * 4. Subtle interactions   — Hover states inform, never distract
 * 5. Monochrome discipline — No accent colors, inversion for emphasis
 *
 * VISUAL LANGUAGE
 * ---------------
 * • Swiss Style grid       — Asymmetric, structured, purposeful
 * • Catalog aesthetic      — Clean lists, consistent patterns
 * • Directory design       — Information-dense but scannable
 * • Anti-brutalist         — Refined edges, warm not harsh
 *
 * COMPONENT PATTERNS
 * ------------------
 * Cards:     hover:bg-global-text hover:text-global-bg (color inversion)
 * Links:     Underlined, thicken on hover (never color change)
 * Buttons:   Border + fill inversion on hover
 * Tags:      Border only, subtle hover
 * Icons:     Allowed in catalog contexts (uses, tools), not decorative
 *
 * COLOR SYSTEM
 * ------------
 * Three-tier text hierarchy:
 *   --color-global-text     Primary content, headings
 *   --color-text-secondary  Body text, descriptions
 *   --color-text-tertiary   Metadata, timestamps, labels
 *
 * Borders:
 *   --color-border          Visible dividers, card borders
 *   --color-border-light    Subtle separators
 *
 * TYPOGRAPHY CLASSES
 * ------------------
 * .page-title      — H1, commanding but not aggressive
 * .section-label   — Uppercase, letterspaced, quiet
 * .section-title   — H2/H3, clear hierarchy
 * .lead-text       — Intro paragraphs, larger secondary
 * .body-text       — Optimal reading (17px, 1.75 line-height)
 * .small-text      — Metadata, captions
 *
 * LINK CLASSES
 * ------------
 * .link            — Primary, always underlined
 * .link-muted      — Secondary content, metadata
 * .link-nav        — Navigation, underline on hover
 * .arrow-link      — "View all →" actions
 * .tag             — Metadata badges
 *
 * INSPIRATIONS
 * ------------
 * Stripe Press, Readymag, Linear, Notion, Paco Coursey, Rauno Freiberg
 *
 * ============================================================================
 */

/* Satoshi font - self-hosted for better performance */
@font-face {
	font-family: "Satoshi";
	src: url("/fonts/Satoshi-Light.otf") format("opentype");
	font-weight: 300;
	font-style: normal;
	font-display: swap;
}
@font-face {
	font-family: "Satoshi";
	src: url("/fonts/Satoshi-LightItalic.otf") format("opentype");
	font-weight: 300;
	font-style: italic;
	font-display: swap;
}
@font-face {
	font-family: "Satoshi";
	src: url("/fonts/Satoshi-Regular.otf") format("opentype");
	font-weight: 400;
	font-style: normal;
	font-display: swap;
}
@font-face {
	font-family: "Satoshi";
	src: url("/fonts/Satoshi-Italic.otf") format("opentype");
	font-weight: 400;
	font-style: italic;
	font-display: swap;
}
@font-face {
	font-family: "Satoshi";
	src: url("/fonts/Satoshi-Medium.otf") format("opentype");
	font-weight: 500;
	font-style: normal;
	font-display: swap;
}
@font-face {
	font-family: "Satoshi";
	src: url("/fonts/Satoshi-MediumItalic.otf") format("opentype");
	font-weight: 500;
	font-style: italic;
	font-display: swap;
}
@font-face {
	font-family: "Satoshi";
	src: url("/fonts/Satoshi-Bold.otf") format("opentype");
	font-weight: 700;
	font-style: normal;
	font-display: swap;
}
@font-face {
	font-family: "Satoshi";
	src: url("/fonts/Satoshi-BoldItalic.otf") format("opentype");
	font-weight: 700;
	font-style: italic;
	font-display: swap;
}
@font-face {
	font-family: "Satoshi";
	src: url("/fonts/Satoshi-Black.otf") format("opentype");
	font-weight: 900;
	font-style: normal;
	font-display: swap;
}
@font-face {
	font-family: "Satoshi";
	src: url("/fonts/Satoshi-BlackItalic.otf") format("opentype");
	font-weight: 900;
	font-style: italic;
	font-display: swap;
}

@import "tailwindcss";
@config "../../tailwind.config.ts";

/* Dark mode selector strategy */
@custom-variant dark (&:where([data-theme="dark"], [data-theme="dark"] *));

/*
 * S-TIER EDITORIAL MINIMALISM TYPOGRAPHY SYSTEM
 *
 * Inspired by: Stripe Press, Readymag, Notion, Linear
 *
 * Principles:
 * - Paper-like warmth (not sterile white)
 * - Generous line-height for effortless reading
 * - Clear typographic hierarchy through weight & size
 * - Optimal measure (65-75 characters per line)
 * - Rhythm through consistent spacing scale
 */

@theme {
	/* ========================================
	   WARM PAPER COLOR PALETTE
	   ======================================== */

	/* Light mode - Warm paper, soft ink */
	--color-global-bg: #fafaf8;          /* Warm paper white */
	--color-global-text: #1c1917;        /* Warm black (stone-900) */
	--color-text-secondary: #57534e;     /* Warm gray (stone-600) */
	--color-text-tertiary: #78716c;      /* Lighter warm gray (stone-500) */
	--color-border: #e7e5e4;             /* Warm border (stone-200) */
	--color-border-light: #f5f5f4;       /* Subtle divider (stone-100) */
	--color-link: #1c1917;               /* Links same as text */
	--color-accent: #1c1917;             /* Accent = text */
	--color-accent-2: #1c1917;
	--color-quote: #57534e;              /* Quotes in secondary */
	--color-code-bg: #f5f5f4;            /* Code background (stone-100) */
	--color-selection: #e7e5e4;          /* Selection highlight */

	/* ========================================
	   TYPOGRAPHY SCALE
	   Based on 1.25 (Major Third) ratio
	   ======================================== */

	--font-sans: "Satoshi", ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
	--font-mono: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;

	/* Font sizes - slightly larger for reading comfort */
	--text-xs: 0.75rem;      /* 12px */
	--text-sm: 0.875rem;     /* 14px */
	--text-base: 1.0625rem;  /* 17px - optimal for reading */
	--text-lg: 1.25rem;      /* 20px */
	--text-xl: 1.5rem;       /* 24px */
	--text-2xl: 1.875rem;    /* 30px */
	--text-3xl: 2.25rem;     /* 36px */

	/* Line heights - generous for readability */
	--leading-tight: 1.25;
	--leading-snug: 1.375;
	--leading-normal: 1.5;
	--leading-relaxed: 1.75;  /* Optimal for body text */
	--leading-loose: 2;

	/* Letter spacing */
	--tracking-tight: -0.02em;
	--tracking-normal: 0;
	--tracking-wide: 0.05em;
	--tracking-wider: 0.1em;

	/* ========================================
	   SPACING RHYTHM
	   Based on 4px grid (0.25rem)
	   ======================================== */

	--spacing-section: 5rem;   /* Between major sections */
	--spacing-block: 2rem;     /* Between paragraphs/blocks */
	--spacing-element: 1rem;   /* Between related elements */
}

@layer base {
	html {
		color-scheme: light dark;
		accent-color: var(--color-accent);
		scrollbar-gutter: stable;

		/* OpenType features for Satoshi */
		font-feature-settings: "ss01", "ss02", "cv01";

		/* Smoother font rendering */
		text-size-adjust: 100%;
		-webkit-text-size-adjust: 100%;

		&[data-theme="light"] {
			color-scheme: light;
		}

		&[data-theme="dark"] {
			color-scheme: dark;

			/* Dark mode - Warm dark, soft light text */
			--color-global-bg: #0c0a09;          /* Warm black (stone-950) */
			--color-global-text: #fafaf9;        /* Warm white (stone-50) */
			--color-text-secondary: #a8a29e;     /* Warm gray (stone-400) */
			--color-text-tertiary: #78716c;      /* Darker warm gray (stone-500) */
			--color-border: #292524;             /* Dark border (stone-800) */
			--color-border-light: #1c1917;       /* Subtle divider (stone-900) */
			--color-link: #fafaf9;
			--color-accent: #fafaf9;
			--color-accent-2: #fafaf9;
			--color-quote: #a8a29e;
			--color-code-bg: #1c1917;            /* Code background (stone-900) */
			--color-selection: #44403c;          /* Selection (stone-700) */
		}
	}

	body {
		/* Premium text rendering */
		text-rendering: optimizeLegibility;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;

		/* Base typography */
		font-size: var(--text-base);
		line-height: var(--leading-relaxed);
		letter-spacing: -0.01em;

		/* Hanging punctuation for refined typography */
		hanging-punctuation: first last;
	}

	/* Text selection */
	::selection {
		background-color: var(--color-selection);
		color: var(--color-global-text);
	}

	/* Focus styles - subtle but visible */
	:focus-visible {
		outline: 2px solid var(--color-global-text);
		outline-offset: 2px;
	}

	:target {
		scroll-margin-block: 6rem;
	}

	@view-transition {
		navigation: auto;
	}

	/* Smooth anchor scrolling */
	html:focus-within {
		scroll-behavior: smooth;
	}

	/* Respect reduced motion */
	@media (prefers-reduced-motion: reduce) {
		html:focus-within {
			scroll-behavior: auto;
		}
		*,
		*::before,
		*::after {
			animation-duration: 0.01ms !important;
			animation-iteration-count: 1 !important;
			transition-duration: 0.01ms !important;
		}
	}

	/* Astro image responsive styles */
	:where([data-astro-image]) {
		object-fit: var(--fit);
		object-position: var(--pos);
	}
	[data-astro-image="full-width"] {
		width: 100%;
	}
	[data-astro-image="constrained"] {
		max-width: 100%;
	}
}

@layer components {
	@import "./components/admonition.css";
	@import "./components/github-card.css";
}

/* ========================================
   EDITORIAL COMPONENT CLASSES
   ======================================== */

/* Section label - uppercase, spaced, quiet */
.section-label {
	font-size: var(--text-xs);
	font-weight: 500;
	text-transform: uppercase;
	letter-spacing: var(--tracking-wider);
	color: var(--color-text-tertiary);
	line-height: var(--leading-normal);
}

/* Page title - commanding but not aggressive */
.page-title {
	font-size: var(--text-2xl);
	font-weight: 700;
	letter-spacing: var(--tracking-tight);
	line-height: var(--leading-tight);
	color: var(--color-global-text);
}

/* Section title - clear hierarchy */
.section-title {
	font-size: var(--text-lg);
	font-weight: 600;
	letter-spacing: var(--tracking-tight);
	line-height: var(--leading-snug);
}

/* Subtitle / lead text */
.lead-text {
	font-size: var(--text-lg);
	font-weight: 400;
	color: var(--color-text-secondary);
	line-height: var(--leading-relaxed);
}

/* Body text - optimal reading */
.body-text {
	font-size: var(--text-base);
	line-height: var(--leading-relaxed);
	color: var(--color-global-text);
}

/* Small text - metadata, captions */
.small-text {
	font-size: var(--text-sm);
	line-height: var(--leading-normal);
	color: var(--color-text-secondary);
}

/* Catalog count - tabular, aligned */
.catalog-count {
	font-size: var(--text-sm);
	font-variant-numeric: tabular-nums;
	color: var(--color-text-tertiary);
}

/* Note: .catalog-card removed - unused */

/* Catalog grid - responsive */
.catalog-grid {
	display: grid;
	gap: 0;
}
@media (min-width: 640px) {
	.catalog-grid {
		grid-template-columns: repeat(2, minmax(0, 1fr));
		gap: 0 3rem;
	}
}
@media (min-width: 1024px) {
	.catalog-grid {
		grid-template-columns: repeat(3, minmax(0, 1fr));
	}
}

/* ========================================
   LINK SYSTEM
   Three link variants for different contexts
   ======================================== */

/* Primary content link - always underlined */
.link {
	color: var(--color-global-text);
	text-decoration: underline;
	text-underline-offset: 2px;
	text-decoration-thickness: 1px;
	transition: text-decoration-thickness 150ms ease;
}
.link:hover {
	text-decoration-thickness: 2px;
}

/* Muted link - for secondary content like tags, metadata */
.link-muted {
	color: var(--color-text-secondary);
	text-decoration: underline;
	text-underline-offset: 2px;
	text-decoration-thickness: 1px;
	transition: color 150ms ease, text-decoration-thickness 150ms ease;
}
.link-muted:hover {
	color: var(--color-global-text);
	text-decoration-thickness: 2px;
}

/* Navigation link - underline on hover only */
.link-nav {
	color: var(--color-text-secondary);
	text-decoration: none;
	transition: color 150ms ease;
}
.link-nav:hover {
	color: var(--color-global-text);
	text-decoration: underline;
	text-underline-offset: 2px;
}

/* Arrow link - for "View all →" style actions */
.arrow-link {
	display: inline-flex;
	align-items: center;
	gap: 0.375rem;
	font-size: var(--text-sm);
	color: var(--color-text-secondary);
	transition: color 150ms ease;
}
.arrow-link:hover {
	color: var(--color-global-text);
}

/* Tag/badge - for metadata labels */
.tag {
	display: inline-block;
	padding: 0.125rem 0.5rem;
	font-size: var(--text-xs);
	color: var(--color-text-secondary);
	border: 1px solid var(--color-border);
	transition: border-color 150ms ease, color 150ms ease;
}
.tag:hover {
	border-color: var(--color-global-text);
	color: var(--color-global-text);
}

/* ========================================
   PROSE UTILITY OVERRIDES
   ======================================== */

@utility prose {
	/* Color tokens */
	--tw-prose-body: var(--color-global-text);
	--tw-prose-headings: var(--color-global-text);
	--tw-prose-lead: var(--color-text-secondary);
	--tw-prose-links: var(--color-global-text);
	--tw-prose-bold: var(--color-global-text);
	--tw-prose-counters: var(--color-text-tertiary);
	--tw-prose-bullets: var(--color-text-tertiary);
	--tw-prose-hr: var(--color-border);
	--tw-prose-quotes: var(--color-text-secondary);
	--tw-prose-quote-borders: var(--color-border);
	--tw-prose-captions: var(--color-text-secondary);
	--tw-prose-code: var(--color-global-text);
	--tw-prose-pre-code: var(--color-global-text);
	--tw-prose-pre-bg: var(--color-code-bg);
	--tw-prose-th-borders: var(--color-border);
	--tw-prose-td-borders: var(--color-border-light);
}

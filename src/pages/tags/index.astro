---
import { getAllPosts, getUniqueTagsWithCount } from "@/data/post";
import PageLayout from "@/layouts/Base.astro";

const allPosts = await getAllPosts();
const allTags = getUniqueTagsWithCount(allPosts);
const totalPosts = allPosts.length;

const meta = {
	description:
		"A full index of topics and themes I've written about on life, technology, business, learning, thinking, and more",
	title: "Tags",
};
---

<PageLayout meta={meta}>
  <header class="mb-12">
    <h1 class="page-title">Tags</h1>
    <p class="mt-2 text-text-secondary">{totalPosts} posts indexed</p>
  </header>

  <section>
    <p class="section-label mb-6">Browse by topic</p>
    <div class="catalog-grid">
      {
        allTags.map(([tag, count]) => (
          <a
            class="group block border-t border-border py-4 transition-colors first:border-t-0 sm:border-t"
            href={`/tags/${tag}/`}
            title={`View posts tagged "${tag}"`}
          >
            <div class="flex items-baseline justify-between gap-4">
              <span class="link font-medium">{tag}</span>
              <span class="catalog-count">{count}</span>
            </div>
          </a>
        ))
      }
    </div>
  </section>

  <footer class="mt-16 border-t border-border pt-6">
    <a class="arrow-link" href="/posts/">
      View all posts <span aria-hidden="true">â†’</span>
    </a>
  </footer>
</PageLayout>
